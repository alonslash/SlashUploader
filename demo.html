<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1,user-scalable=0">
<title>SlashUploader Demos</title>
<script src="./SlashUploader/SlashUploader.min.js"></script>
<link rel="stylesheet" href="./SlashUploader/SlashUploader.min.css" type="text/css" />

<script>
var uploaderDefault;
var uploaderSingleFile;
var uploaderNoMetadata;
var uploaderNoChunks;
var uploaderDisabled;
var uploaderPreDefinedFiles;
var uploaderProgressBar;
var uploaderRtl;
var uploaderNoDragDrop;
var uploaderNoCancelDelete;
var uploaderNoResults;
var uploaderCrossDomain;
var uploaderCrossDomainNoChuncks;
var uploaderWithValidations;
var uploaderNoOverwrite;
var uploaderCustomCss;
var uploaderCustomHTML;

function init () {
	setTimeout (function () {
		buildUploaders();
	}, 10);
}

if (typeof console == "undefined") console = { // Prevent old browsers error
    log: function() {},
    debug: function() {},
    error: function() {},
    warn: function() {}
};

function buildUploaders () {
	
	var onFilesSelected = function (files) {
		console.log ("onFilesSelected", files);
		var str = "<u>Files selected:</u><br>";
		for (var i=0; i<files.length; i++) {
			str += files[i].name+"; "+files[i].width+"x"+files[i].height+"<br>";
		}
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	};

	var onFilesUploaded = function (files) {
		console.log ("onFilesUploaded", files);
		var str = "<u>Files uploaded:</u><br>";
		for (var i=0; i<files.length; i++) {
			str += files[i].file_name+"<br>";
		}
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	};

	var onFileDeleted = function (deletedFile, files) {
		console.log ("onFileDeleted", deletedFile, files);
		var str = "<u>deleted:</u> ";
		str += deletedFile.file_name+"<br>";
		str += "<u>Files remaining:</u><br>";
		for (var i=0; i<files.length; i++) {
			str += files[i].file_name+"<br>";
		}
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	}

	var onFilesProgress = function (curUploadingFileProgress, curUploadingFileIndex, totalFilesToUpload) {
		var str = Math.floor(curUploadingFileProgress*100)+"% ("+(curUploadingFileIndex+1)+"/"+totalFilesToUpload+")";
		console.log ("onFilesProgress", str);
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	};

	var onCanceled = function () {
		var str = "Canceled";
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	};

	var onError = function (errors) {
		console.log ("onError", errors);
		var str = "<u>Error with files:</u><br>";
		for (var i=0; i<errors.length; i++) {
			if (errors[i].file != null) {
				str += errors[i].file.name+"<br>";
			}
		}
		var responseElement = this.elements.containerElement.parentNode.parentNode.querySelector(".uploader_status");
		responseElement.innerHTML = str;
	};
	
	
	uploaderDefault = new SlashUploader (document.getElementById("uploader_default"));

	
	uploaderSingleFile = new SlashUploader (document.getElementById("uploader_single_file"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError,
		showFocusRect: true
	});
	uploaderSingleFile.dropFilesText = "Drop file here";
	uploaderSingleFile.browseText = "Drop file here or click to upload";
	uploaderSingleFile.maxFiles = 1;
	

	uploaderNoMetadata = new SlashUploader (document.getElementById("uploader_no_metadata"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoMetadata.doGetFileMetadata = false;


	uploaderNoChunks = new SlashUploader (document.getElementById("uploader_no_chunks"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoChunks.uploadFileInChunks = false;


	uploaderDisabled = new SlashUploader (document.getElementById("uploader_disabled"));
	uploaderDisabled.uploadedFiles = [
						{file_name: "2015-08-13(2).jpg", file_path: "//mydomain.com/uploads/2015-08-13(2).jpg"},
						{file_name: "test.png", file_path: "//mydomain.com/uploads/test.png"}
					];
	uploaderDisabled.disabled = true;
	uploaderDisabled.onFilesUploaded = function (files) {
		this.disabled = true;
	};


	uploaderPreDefinedFiles = new SlashUploader (document.getElementById("uploader_pre_defined_files"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderPreDefinedFiles.uploadedFiles = [
						{file_name: "2015-08-13(2).jpg", file_path: "//mydomain.com/uploads/2015-08-13(2).jpg"},
						{file_name: "test.png", file_path: "//mydomain.com/uploads/test.png"}
					];


	uploaderProgressBar = new SlashUploader (document.getElementById("uploader_progress_bar"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderProgressBar.progressAnimationType = "inline|bar";

	
	uploaderRtl = new SlashUploader (document.getElementById("uploader_rtl"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderRtl.progressAnimationType = "inline|bar";
	uploaderRtl.rtl = true;
	uploaderRtl.maxFileChars = 10;
	uploaderRtl.browseText = "הנח קבצים כאן או לחץ לבחירת קבצים";
	uploaderRtl.browseTextDropDisabled = "לחץ לבחירת קובץ";
	uploaderRtl.dropFilesText = "הנח קבצים כאן";
	uploaderRtl.uploadingFileText = "מעלה את הקובץ \"{{current_file_name}}\"...";
	uploaderRtl.uploadingFileTextProgressBar = "מעלה את הקובץ \"{{current_file_name}}\"...";
	uploaderRtl.uploadingFilesText = "מעלה {{total_files}} קבצים...";
	uploaderRtl.uploadingFilesTextProgressBar = "מעלה {{total_files}} קבצים...";
	uploaderRtl.uploadingFileByFileText = "מעלה את הקובץ \"{{current_file_name}}\" (קובץ {{current_file_index}} מתוך {{total_files}})";
	uploaderRtl.cancelText = "ביטול";
	uploaderRtl.uploadedFileTemplate = function (fileData) {
		if (fileData.file_name.toLowerCase().indexOf(".jpg") != -1 || fileData.file_name.toLowerCase().indexOf(".png") != -1) {
			return "<img src='"+fileData.file_path+"' height='40' />"
		} else {
			return "<a style='direction: rtl; font-weight: bold;' href='"+fileData.file_path+"' target='_blank'>"+fileData.file_name+"</a>";
		}
	}
	uploaderRtl.errors = {
		invalidFileExtension: "סוג הקובץ לא נתמך",
		invalidFileSize: "הקובץ כבד מדי",
		parseFailed: "פירסוס מידע נכשל",
		unspecifiedError: "תקלה לא מזוהת",
		uploadFailed: "העלאה נכשלה"
	};

	
	uploaderNoDragDrop = new SlashUploader (document.getElementById("uploader_no_drag_drop"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoDragDrop.enableDropFiles = false;


	uploaderNoCancelDelete = new SlashUploader (document.getElementById("uploader_no_cancel_delete"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoCancelDelete.enableCancelButton = false;
	uploaderNoCancelDelete.enableDeleteButton = false;


	uploaderNoResults = new SlashUploader (document.getElementById("uploader_no_results"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoResults.showUploadedFiles = false;
	
	
	var crossDomainScripts = {
		uploadChunk: "//slashuploader.com/src/js/SlashUploader/server/UploadFiles.aspx?method=upload_chunk&file_name={{file_name}}&chunk_index={{chunk_index}}&request_id={{request_id}}",
		combineChunks: "//slashuploader.com/src/js/SlashUploader/server/UploadFiles.aspx?method=combine_chunks&rotation={{rotation}}&file_name={{file_name}}&request_id={{request_id}}&file_size={{size}}&file_rotation={{rotation}}&file_duration={{duration}}&file_w={{width}}&file_h={{height}}&file_ext={{extension}}",
		uploadStream: "//slashuploader.com/src/js/SlashUploader/server/UploadFiles.aspx?method=upload_stream&rotation={{rotation}}&file_name={{file_name}}&file_size={{size}}&file_rotation={{rotation}}&file_duration={{duration}}&file_w={{width}}&file_h={{height}}&file_ext={{extension}}",
		uploadThroughIframe: "//slashuploader.com/src/js/SlashUploader/server/UploadFiles.aspx?method=upload_through_iframe&rotation={{rotation}}&request_id={{request_id}}&iframe_gateway={{iframe_gateway}}&file_size={{size}}&file_rotation={{rotation}}&file_duration={{duration}}&file_w={{width}}&file_h={{height}}&file_ext={{extension}}"
	};
		
	uploaderCrossDomain = new SlashUploader (document.getElementById("uploader_field_cross_domain"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderCrossDomain.serverScripts = crossDomainScripts;
	
	uploaderCrossDomainNoChuncks = new SlashUploader (document.getElementById("uploader_field_cross_domain_no_chunks"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderCrossDomainNoChuncks.serverScripts = crossDomainScripts;
	uploaderCrossDomainNoChuncks.uploadFileInChunks = false;


	uploaderWithValidations = new SlashUploader (document.getElementById("uploader_field_validations"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderWithValidations.allowedFilesExtensions = ["mp4", "mov", "avi", "ogv", "wmv", "flv", "mkv", "mpg", "webm"];
	uploaderWithValidations.allowedMaxFileSize = 5000;
	uploaderWithValidations.customValidation = function (file) {
		if (file.duration == null) {
			console.log ("Couldn't read metadata for '"+file.name+"', so duration validation isn't possible");
		} else if (file.duration < 10) {
			return {error: 'invalid_duration', error_text: "\"{{file_name}}\" duration is less then 10 seconds."};
		}
	};
	uploaderWithValidations.errors = {
		invalidFileExtension: "File \"{{file_name}}\" is not a supportted video format.",
		invalidFileSize: "File \"{{file_name}}\" exceeds 5MB."
	};
	uploaderWithValidations.acceptOnlyFilesTypes = "video/*";
	uploaderWithValidations.maxFileChars = 18;
	uploaderWithValidations.resetFilesOnEachUpload = false;


	uploaderNoOverwrite = new SlashUploader (document.getElementById("uploader_no_overwrite"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	uploaderNoOverwrite.resetFilesOnEachUpload = false;
	uploaderNoOverwrite.progressAnimationType = "inline|bar";


	uploaderCustomCss = new SlashUploader (document.getElementById("uploader_custom_css"), {
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError,
		height: 150
	});
	uploaderCustomCss.progressAnimationType = "inline|bar";


	uploaderCustomHTML = new SlashUploader (document.getElementById("uploader_field_custom_button"), {
		customHTML: true,
		onFilesSelected: onFilesSelected,
		onFilesUploaded: onFilesUploaded,
		onFilesProgress: onFilesProgress,
		onFileDeleted: onFileDeleted,
		onCanceled: onCanceled,
		onError: onError
	});
	

}
</script>

<style>
html, body {
	font-family: arial;
}

.uploader_field_container {
	background: #F7F7F7;
	border: 1px solid #CCC;
	border-radius: 2px;
}
.uploader_field {
	width: 450px;
	/*height: 120px;*/
}
#uploader_field3, #uploader_field4 {
	height: 70px;
}
.uploader_status {
	vertical-align: top;
	font-size: 12px;
}
.custom_html {
	width: 120px;
    height: auto;
	border: 2px solid red;
    transition: all 0.5s;
	-webkit-transition: all 0.5s;
}
.custom_html.hover {
    background-color: tomato;
}
.custom_html.dragged_enter {
	border: 2px dashed red;
	background-color: white;
}
.custom_html.dragged_over {
	border: 2px dashed tomato;
	background-color: #ffcaca;
}
.custom_html.uploading {
	opacity: 0.5;
}


.custom_css .uploader_drop_area {
	border: 2px solid green;
	color: green;
}
.custom_css.hover .uploader_drop_area {
	background: #93c293;
	color: white;
}
.custom_css.dragged_enter .uploader_drop_area {
	background: #296d29;
	color: white;
	border: 2px dashed white;
}
.custom_css.dragged_over .uploader_drop_area {
	background: #0c510c;
	color: white;
	border: 2px dashed white;
}
.custom_css.uploading .uploader_text span {
	font-weight: bold;
}
.custom_css .uploader_drop_area_bottom {
	background: #97e497;
}
.custom_css .uploader_spinner {
    border: 2px solid green;
    border-right: 2px solid rgba(0, 255, 0, 0.25);
    border-bottom: 2px solid rgba(0, 255, 0, 0.25);
    border-left: 2px solid rgba(0, 255, 0, 0.25);
}
.custom_css .uploader_result_file a {
	color: green;
}
.custom_css .uploader_progress_container .uploader_progress_bar>div>div {
	background: green;
}

@media (max-width: 640px) {
	.uploader_field {
		width: 150px;
	}
}
/*
form {
	width: 0; height: 0;
}*/

</style>

</head>

<body onload="init();">
	
	<form>
	<table cellpadding='6'>
		<tr>
			<th class="title_th">
			</th>
			<th class="uploader_th">
			</th>
			<th class="status_th">
			</th>
		</tr>
		<tr>
			<td>
				Default
			</td>
			<td class="uploader_field_container">
				<div id="uploader_default" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Single File
			</td>
			<td class="uploader_field_container">
				<div id="uploader_single_file" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Without metadata
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_metadata" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Without chunks upload
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_chunks" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Disabled
			</td>
			<td class="uploader_field_container">
				<div id="uploader_disabled" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Pre-defined files
			</td>
			<td class="uploader_field_container">
				<div id="uploader_pre_defined_files" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Progress bar animation
			</td>
			<td class="uploader_field_container">
				<div id="uploader_progress_bar" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				RTL
			</td>
			<td class="uploader_field_container">
				<div id="uploader_rtl" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Drag & Drop disabled
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_drag_drop" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Cancel & Delete disabled
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_cancel_delete" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Don't show uploaded files
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_results" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
			</td>
		</tr>
		<tr>
			<td>
				Cross-Domain Script
			</td>
			<td class="uploader_field_container">
				<div id="uploader_field_cross_domain" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
				<div></div>
			</td>
		</tr>
		<tr>
			<td>
				Cross-Domain Script, No Chunks
			</td>
			<td class="uploader_field_container">
				<div id="uploader_field_cross_domain_no_chunks" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
				<div></div>
			</td>
		</tr>
		<tr>
			<td>
				Validations
			</td>
			<td class="uploader_field_container">
				<div id="uploader_field_validations" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
				<div></div>
			</td>
		</tr>
		<tr>
			<td>
				No overwrite
			</td>
			<td class="uploader_field_container">
				<div id="uploader_no_overwrite" class="uploader_field">
				</div>
			</td>
			<td class="uploader_status">
				<div></div>
			</td>
		</tr>
		<tr>
			<td>
				Custom CSS
			</td>
			<td class="uploader_field_container">
				<div id="uploader_custom_css" class="uploader_field custom_css">
				</div>
			</td>
			<td class="uploader_status">
				<div></div>
			</td>
		</tr>
		<tr>
			<td>
				Custom button
			</td>
			<td class="uploader_field_container">
				<div id="uploader_field_custom_button" class="custom_html">
					<div class="btn" style="padding: 20px;">
						Upload it!
					</div>
				</div>
				<a href='javascript: uploaderCustomHTML.cancelUpload(); void (0);'>Cancel</a>
			</td>
			<td class="uploader_status">
			</td>
		</tr>



	</table>
	</form>

</body>
</html>
