/*
 * SlashUploader - JS plugin - Version 1.5.3
 * Copyright (c) 2018 Slash Apps Development, http://slash.co.il/
 * Licensed under the MIT License [https://en.wikipedia.org/wiki/MIT_License]
 */

function FileData(e){this.file,this.name,this.size,this.duration,this.width,this.height,this.extension,this.rotation,this.init=function(e){this.file=e;var n=e.name;null==n&&(n=""),this.name=n,this.size=e.size/1024,this.extension=n.substr(n.lastIndexOf(".")+1,5).toLowerCase()},this.init(e)}function SlashUploader(e,n){this.opts=n,this._internalVariables={},this._internalVariables.instance=this,this._internalVariables.hoverOnBtn=!1,this._internalVariables.draggedOnBtn=!1,this._internalVariables.isUploading=!1,this._internalVariables.draggedOnDocument=!1,this._internalVariables.curUploadingFileIndex=0,this._internalVariables.curUploadingFilesData=[],this._internalVariables.totalFilesToUpload=0,this._internalVariables.BYTES_PER_CHUNK=77570,this._internalVariables.curMouseX=-1,this._internalVariables.lastMouseX=-1,this._internalVariables.curMouseY=-1,this._internalVariables.lastMouseY=-1,this._internalVariables.uploadXhr=null,this._internalVariables.displayErrorAnimationTimeoutDuration,this._internalVariables.onChangeTriggered=!1,this._internalVariables.setVariable=function(e){var n=this.instance;"acceptOnlyFilesTypes"==e?noJquery(n.elements.uploaderInputElement).attr("accept",n.acceptOnlyFilesTypes):"maxFiles"==e?n.maxFiles>1?null!=n.elements.uploaderInputElement&&noJquery(n.elements.uploaderInputElement).attr("multiple","multiple"):null!=n.elements.uploaderInputElement&&noJquery(n.elements.uploaderInputElement).removeAttr("multiple"):"showUploadedFiles"==e?n.showUploadedFiles?(noJquery(n.elements.uploaderDropAreaWrapper).css("width",""),noJquery(n.elements.uploaderDropAreaWrapper).css("display","")):(noJquery(n.elements.uploaderResultWrapperElement).attr("style","width: 0px; display: none;"),noJquery(n.elements.uploaderDropAreaWrapper).css("width","100%")):"disabled"==e?n.disabled?(noJquery(n.elements.containerElement).addClass("disabled"),noJquery(n.elements.uploaderDropAreaElement).find(".input_wrapper").css("display","none")):(noJquery(n.elements.containerElement).removeClass("disabled"),noJquery(n.elements.uploaderDropAreaElement).find(".input_wrapper").css("display","")):"rtl"==e?n.rtl?noJquery("#"+n.elements.elementId).addClass("rtl"):noJquery("#"+n.elements.elementId).removeClass("rtl"):"height"==e?n._internalVariables.setHeight():"enableDropFiles"==e?n._internalVariables.setDropFileEvents():"enableCancelButton"==e?n._internalVariables.setCancelButtonDisplay():"progressAnimationType"==e?n._internalVariables.setProgressDisplay():"showFocusRect"==e?n._internalVariables.setShowFocusRect():"maxFileChars"!=e&&"uploadedFiles"!=e&&"uploadedFileHtml"!=e&&"uploadedFileTemplate"!=e&&"enableDeleteButton"!=e||n._internalVariables.showCurrentFiles(),n._internalVariables.setText()};var a={};if(this._internalVariables.defineProperty=function(e,n){var r=this.instance;Object.defineProperty(r,e,{get:function(){return a[e]},set:function(t){a[e]=t,n?r._internalVariables.setVariable(e):r._internalVariables.setVariable()}})},this._internalVariables.defineProperty("acceptOnlyFilesTypes",!0),this._internalVariables.defineProperty("showUploadedFiles",!0),this._internalVariables.defineProperty("disabled",!0),this._internalVariables.defineProperty("enableDropFiles",!0),this._internalVariables.defineProperty("enableCancelButton",!0),this._internalVariables.defineProperty("enableDeleteButton",!0),this._internalVariables.defineProperty("maxFiles",!0),this._internalVariables.defineProperty("progressAnimationType",!0),this._internalVariables.defineProperty("maxFileChars",!0),this._internalVariables.defineProperty("uploadedFiles",!0),this._internalVariables.defineProperty("rtl",!0),this._internalVariables.defineProperty("height",!0),this._internalVariables.defineProperty("showFocusRect",!0),this._internalVariables.defineProperty("uploadedFileHtml",!0),this._internalVariables.defineProperty("uploadedFileTemplate",!0),this._internalVariables.defineProperty("browseText",!1),this._internalVariables.defineProperty("browseTextDropDisabled",!1),this._internalVariables.defineProperty("dropFilesText",!1),this._internalVariables.defineProperty("uploadingFileText",!1),this._internalVariables.defineProperty("uploadingFileTextProgressBar",!1),this._internalVariables.defineProperty("uploadingFilesText",!1),this._internalVariables.defineProperty("uploadingFilesTextProgressBar",!1),this._internalVariables.defineProperty("uploadingFileByFileText",!1),this._internalVariables.defineProperty("cancelText",!1),Object.defineProperty(this,"serverScripts",{get:function(){return a.serverScripts},set:function(e){var n=this.serverScripts;noJquery.extend(n,e),a.serverScripts=n}}),Object.defineProperty(this,"isUploading",{get:function(){return null!=this._internalVariables&&this._internalVariables.isUploading}}),this.onFilesSelected=null,this.onFilesUploaded=null,this.onFileDeleted=null,this.onFilesProgress=null,this.onCanceled=null,this.onError=null,this.customValidation=null,this.customHTML=!1,this.uploadFileInChunks=!0,this.resetFilesOnEachUpload=!0,this.iframeGateway="./SlashUploader/iframe_gateway.html",this.doGetFileMetadata=!0,this.allowedFilesExtensions=null,this.allowedMaxFileSize=null,this.showDetailedErrorFromServer=!0,this.displayErrorDuration=4500,a.serverScripts={uploadChunk:"./SlashUploader/server/UploadFiles.aspx?method=upload_chunk&file_name={{file_name}}&chunk_index={{chunk_index}}&request_id={{request_id}}",combineChunks:"./SlashUploader/server/UploadFiles.aspx?method=combine_chunks&rotation={{rotation}}&file_name={{file_name}}&request_id={{request_id}}",uploadStream:"./SlashUploader/server/UploadFiles.aspx?method=upload_stream&rotation={{rotation}}&file_name={{file_name}}",uploadThroughIframe:"./SlashUploader/server/UploadFiles.aspx?method=upload_through_iframe&rotation={{rotation}}&request_id={{request_id}}&iframe_gateway={{iframe_gateway}}",fileNameVariableName:"file_name",fileUrlVariableName:"file_path",errorVariableName:"error"},a.showUploadedFiles=!0,a.disabled=!1,a.enableDropFiles=!0,a.enableCancelButton=!0,a.enableDeleteButton=!0,a.maxFiles=9999,a.progressAnimationType="inline",a.height=80,a.showFocusRect=!1,a.maxFileChars=20,a.uploadedFiles=[],a.browseText="Drop files here or click to upload",a.browseTextDropDisabled="Click to upload",a.dropFilesText="Drop files here",a.uploadingFileText='Uploading "{{current_file_name}}"',a.uploadingFileTextProgressBar='Uploading "{{current_file_name}}"',a.uploadingFilesText="Uploading {{total_files}} files",a.uploadingFilesTextProgressBar="Uploading {{total_files}} files",a.uploadingFileByFileText='Uploading "{{current_file_name}}" ({{current_file_index}}/{{total_files}})',a.uploadedFileHtml="<a href='{{current_file_path}}' target='_blank'>{{current_file_name}}</a>",a.uploadedFileTemplate=null,a.cancelText="Cancel",this.elements={},this.elements.elementId="SlashUploader_"+Math.floor(999999999*Math.random()),this.elements.containerElement=e,this.elements.uploaderDropAreaElement=null,this.elements.uploaderTextElement=null,this.elements.uploaderDropAreaWrapper=null,this.elements.uploaderDropAreaBottomLayerElement=null,this.elements.uploaderDropAreaMiddleLayerElement=null,this.elements.uploaderResultWrapperElement=null,this.elements.uploaderResultElement=null,this.elements.uploaderProgressContainerElement=null,this.elements.uploaderProgressBrElement=null,this.elements.uploaderProgressBarElement=null,this.elements.uploaderProgressBarPaddingElement=null,this.elements.uploaderProgressBarTextElement=null,this.elements.uploaderProgressBarColorElement=null,this.elements.uploaderInputElement=null,this.elements.uploaderCancelButton=null,this.errors={},this.errors.invalidFileExtension="Invalid file extension ({{file_name}})",this.errors.invalidFileSize="Invalid file size ({{file_name}})",this.errors.uploadFailed="Failed to upload",this.errors.parseFailed="Failed to parse result",this.errors.unspecifiedError="Unspecified error",-1!=navigator.appVersion.indexOf("MSIE")&&8==parseFloat(navigator.appVersion.split("MSIE")[1])){var r=this,t=a.serverScripts,i={};setTimeout(function(){!function e(){i.acceptOnlyFilesTypes!=r.acceptOnlyFilesTypes&&r._internalVariables.setVariable("acceptOnlyFilesTypes"),i.showUploadedFiles!=r.showUploadedFiles&&r._internalVariables.setVariable("showUploadedFiles"),i.disabled!=r.disabled&&r._internalVariables.setVariable("disabled"),i.enableDropFiles!=r.enableDropFiles&&r._internalVariables.setVariable("enableDropFiles"),i.enableCancelButton!=r.enableCancelButton&&r._internalVariables.setVariable("enableCancelButton"),i.enableDeleteButton!=r.enableDeleteButton&&r._internalVariables.setVariable("enableDeleteButton"),i.maxFiles!=r.maxFiles&&r._internalVariables.setVariable("maxFiles"),i.progressAnimationType!=r.progressAnimationType&&r._internalVariables.setVariable("progressAnimationType"),noJquery(r.elements.uploaderResultElement).hasClass("error")&&""!=noJquery(r.elements.uploaderResultElement).html()||(i.maxFileChars!=r.maxFileChars&&r._internalVariables.setVariable("maxFileChars"),i.uploadedFiles!=r.uploadedFiles&&r._internalVariables.setVariable("uploadedFiles")),i.rtl!=r.rtl&&r._internalVariables.setVariable("rtl"),r._internalVariables.setVariable(),i.acceptOnlyFilesTypes=r.acceptOnlyFilesTypes,i.showUploadedFiles=r.showUploadedFiles,i.disabled=r.disabled,i.enableDropFiles=r.enableDropFiles,i.enableCancelButton=r.enableCancelButton,i.enableDeleteButton=r.enableDeleteButton,i.maxFiles=r.maxFiles,i.progressAnimationType=r.progressAnimationType,i.maxFileChars=r.maxFileChars,i.uploadedFiles=r.uploadedFiles,i.rtl=r.rtl,i.height=r.height,i.showFocusRect=r.showFocusRect,noJquery.extend(t,r.serverScripts),r.serverScripts=t,setTimeout(function(){e()},3e3)}()},250)}this._internalVariables.build=function(){var e=this.instance,n=e._internalVariables.getIEVersion();if(n>=0&&n<=8)for(var r in a)e[r]=a[r];if(null!=e.opts&&(noJquery.extend(e.errors,e.opts.errors),delete e.opts.errors,noJquery.extend(e.serverScripts,e.opts.serverScripts),delete e.opts.serverScripts,noJquery.extend(e,e.opts)),null!=e.elements.containerElement){e.elements.containerElement.tagName.toUpperCase();noJquery('<form id="'+e.elements.elementId+'_form" name="'+e.elements.elementId+'_form" class="slash_uploader_form"></form>').appendTo("body");var t="";t+='<span id="'+e.elements.elementId+'" name="'+e.elements.elementId+'" class="uploader_container">',e.customHTML?(t+='<div class="uploader_drop_area_custom">',t+="</div>"):(t+='<div class="uploader_div">',t+='\t<div class="uploader_drop_area_wrapper">',t+='\t\t<div class="uploader_drop_area_bottom_bg"></div>',t+='\t\t<div class="uploader_drop_area_bottom"><img /></div>',t+='\t\t<div class="uploader_drop_area_middle"><img /></div>',t+='\t\t<div class="uploader_drop_area">',t+='\t\t\t<div class="uploader_text"><span><div class="uploader_spinner"></div><span></span></span></div>',t+='\t\t\t<div class="uploader_cancel"><span></span></div>',t+="\t\t</div>",t+="\t</div>",t+='\t<div class="uploader_result_wrapper"><div class="uploader_result"></div></div>',t+='\t<br style="clear: both;" />',t+="</div>",t+='<div class="uploader_progress_container" style="display: none;">',t+="\t<table><tr>",t+='\t\t<td class="uploader_progress_bar_loading"><div class="uploader_spinner"></div><span></span></td>',t+='\t\t<td class="uploader_progress_bar_loading_padding"></td>',t+='\t\t<td class="uploader_progress_bar"><div><div></div></div></td>',t+='\t\t<td class="uploader_progress_bar_padding"></td>',t+='\t\t<td class="uploader_progress_bar_text"></td>',t+="\t</tr></table>",t+="</div>",t+='<br style="clear: both;" class="uploader_progress_br" />'),t+="</span>",e.customHTML?(noJquery(e.elements.containerElement).css("position","relative"),noJquery(e.elements.containerElement).html(t+noJquery(e.elements.containerElement).html())):noJquery(e.elements.containerElement).html(t),noJquery(e.elements.containerElement).addClass("slash_uploader"),noJquery(e.elements.containerElement).on("mousemove",function(n){var a=this;null!=noJquery(this).find(".uploader_drop_area_wrapper")[0]&&(a=noJquery(this).find(".uploader_drop_area_wrapper")[0]),noJquery(e.elements.uploaderDropAreaElement).find("input").css("left",n.pageX-noJquery(a).offset().left-120),noJquery(e.elements.uploaderDropAreaElement).find("input").css("top",n.pageY-noJquery(a).offset().top-20)}),e.customHTML?e.elements.uploaderDropAreaElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_custom").get(0):e.elements.uploaderDropAreaElement=noJquery(e.elements.containerElement).find(".uploader_drop_area").get(0),e.elements.uploaderTextElement=noJquery(e.elements.containerElement).find(".uploader_drop_area").find(".uploader_text span").get(0),e.elements.uploaderDropAreaWrapper=noJquery(e.elements.containerElement).find(".uploader_drop_area_wrapper").get(0),e.elements.uploaderDropAreaBottomLayerElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_bottom").get(0),e.elements.uploaderDropAreaMiddleLayerElement=noJquery(e.elements.containerElement).find(".uploader_drop_area_middle").get(0),e.elements.uploaderResultElement=noJquery(e.elements.containerElement).find(".uploader_result").get(0),e.elements.uploaderResultWrapperElement=noJquery(e.elements.containerElement).find(".uploader_result_wrapper").get(0),e.elements.uploaderProgressContainerElement=noJquery(e.elements.containerElement).find(".uploader_progress_container").get(0),e.elements.uploaderProgressBrElement=noJquery(e.elements.containerElement).find(".uploader_progress_br").get(0),e.elements.uploaderProgressBarElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar").get(0),e.elements.uploaderProgressBarPaddingElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar_padding").get(0),e.elements.uploaderProgressBarTextElement=noJquery(e.elements.containerElement).find(".uploader_progress_bar_text").get(0),e.elements.uploaderProgressBarColorElement=noJquery(e.elements.containerElement).find(".uploader_progress_container .uploader_progress_bar div div").get(0),e.elements.uploaderCancelButton=noJquery(e.elements.containerElement).find(".uploader_cancel").get(0),e._internalVariables.buildFileInput(),e._internalVariables.setProgressDisplay(),e._internalVariables.setShowFocusRect(),e._internalVariables.setText(),e._internalVariables.setDocumentEvents(),e._internalVariables.setDropFileEvents(),e._internalVariables.showCurrentFiles(),noJquery(e.elements.uploaderCancelButton).on("click",function(){e.cancelUpload()}),e._internalVariables.validateIframeGatewayPath()}else e._internalVariables.consoleError("Element not exist in DOM.")},this._internalVariables.setShowFocusRect=function(){var e=this.instance;e.showFocusRect?noJquery(e.elements.containerElement).addClass("show_focus_rect"):noJquery(e.elements.containerElement).removeClass("show_focus_rect")},this._internalVariables.setHeight=function(){var e=this.instance,n=e.height;-1!=e.progressAnimationType.indexOf("bar")&&(n-=25),e.customHTML||noJquery(e.elements.containerElement).css("min-height",e.height+"px"),noJquery(e.elements.uploaderDropAreaWrapper).css("height",n+"px"),noJquery(e.elements.uploaderResultWrapperElement).css("height",n+"px")},this._internalVariables.setProgressDisplay=function(){var e=this.instance;null!=e.elements.containerElement&&(null==e.progressAnimationType&&(e.progressAnimationType=""),-1!=e.progressAnimationType.indexOf("bar")?(noJquery(e.elements.containerElement).addClass("loading_bar"),e._internalVariables.isUploading&&null!=e.elements.uploaderProgressContainerElement&&(noJquery(e.elements.uploaderProgressContainerElement).css("display",""),noJquery(e.elements.uploaderProgressBrElement).css("display",""))):(noJquery(e.elements.containerElement).removeClass("loading_bar"),null!=e.elements.uploaderProgressContainerElement&&(noJquery(e.elements.uploaderProgressContainerElement).css("display","none"),noJquery(e.elements.uploaderProgressBrElement).css("display","none"))),null!=e.elements.uploaderDropAreaBottomLayerElement&&(-1==e.progressAnimationType.indexOf("inline")||!e._internalVariables.isUploading||"chunks"!=e._internalVariables.getUploadType()&&"stream"!=e._internalVariables.getUploadType()?(noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","none")):(noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","")))),e._internalVariables.setHeight()},this._internalVariables.validateFiles=function(){for(var e=this.instance,n=[],a=0;a<e._internalVariables.curUploadingFilesData.length;a++){var r=e._internalVariables.curUploadingFilesData[a],t=(r.name,r.extension),i=r.size;if(null!=e.allowedFilesExtensions&&e.allowedFilesExtensions.length>0&&-1==noJquery.inArray(t.toLowerCase(),e.allowedFilesExtensions)?n.push({error:"invalid_file_extension",file:r}):null!=e.allowedMaxFileSize&&e.allowedMaxFileSize>0&&i>e.allowedMaxFileSize&&n.push({error:"invalid_file_size",file:r}),0==n.length&&null!=e.allowedMaxFileSize&&e.allowedMaxFileSize>0){var l=e._internalVariables.getIEVersion();l>0&&l<=9&&e._internalVariables.consoleError("Size validation is not possible on IE9 and below")}if("function"==typeof e.customValidation){var s=e.customValidation(r);null!=s&&(s.file=r.file,n.push(s))}}return n},this._internalVariables.buildFileInput=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaElement).find(".input_wrapper").remove(),noJquery(e.elements.uploaderDropAreaElement).append(noJquery("<div class='input_wrapper'><input id='"+e.elements.elementId+"_input' name='"+e.elements.elementId+"_input' type='file' "+(e.maxFiles>1?"multiple":"")+" /></div>")[0]);var n=noJquery(e.elements.containerElement).find("input")[0];null!=n&&(n.onchange=function(){e._internalVariables.onChangeTriggered=!0;var n=this.files;if(null==n){var a={},r=this.value;null!=r&&""!=r&&(-1!=r.indexOf("/")&&(r=r.substr(r.lastIndexOf("/")+1)),-1!=r.indexOf("\\")&&(r=r.substr(r.lastIndexOf("\\")+1)),a.name=r),n=[a]}if(noJquery(e.elements.uploaderDropAreaElement).find("input").css("display","none"),!e._internalVariables.isUploading&&n){e._internalVariables.curUploadingFilesData=[];for(var t=0;t<n.length;t++){a=n[t];e._internalVariables.curUploadingFilesData.push(new FileData(a))}e._internalVariables.totalFilesToUpload=Math.min(n.length,e.maxFiles),e._internalVariables.traverseFiles()}setTimeout(function(){e._internalVariables.onChangeTriggered=!1},1)},n.onmouseover=function(){e._internalVariables.hoverOnBtn=!0,e._internalVariables.checkDragFileStates()},n.onmouseout=function(){e._internalVariables.hoverOnBtn=!1,e._internalVariables.checkDragFileStates()}),e.elements.uploaderInputElement=noJquery(e.elements.containerElement).find("input")[0],e.elements.uploaderInputElement.onfocus=function(){noJquery(e.elements.containerElement).addClass("focused")},e.elements.uploaderInputElement.onblur=function(){noJquery(e.elements.containerElement).removeClass("focused")},e._internalVariables.setVariable("acceptOnlyFilesTypes"),e._internalVariables.setVariable("showUploadedFiles"),e._internalVariables.setVariable("disabled"),e._internalVariables.setVariable("rtl"),e._internalVariables.checkDragFileStates()},this._internalVariables.showUploadBtn=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("display","none"),noJquery(e.elements.containerElement).removeClass("uploading"),noJquery(e.elements.containerElement).find("input").attr("onclick",""),e._internalVariables.setText(),e._internalVariables.buildFileInput(),noJquery(e.elements.uploaderProgressContainerElement).css("display","none"),noJquery(e.elements.uploaderProgressBrElement).css("display","none"),noJquery(e.elements.uploaderProgressBarColorElement).css("width","0%"),noJquery(e.elements.uploaderCancelButton).css("display","none")},this._internalVariables.setDropFileEvents=function(){var e=this.instance;null!=e.elements.uploaderDropAreaElement&&(noJquery(e.elements.uploaderDropAreaElement).unbind("dragleave"),noJquery(e.elements.uploaderDropAreaElement).unbind("dragenter, dragover"),noJquery(e.elements.uploaderDropAreaElement).unbind("drop"),e._internalVariables.isDropFilesEnabled()&&(noJquery(e.elements.uploaderDropAreaElement).on("dragleave",function(n){e.disabled||(e._internalVariables.draggedOnBtn=!1,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())}),noJquery(e.elements.uploaderDropAreaElement).on("dragenter, dragover",function(n){e.disabled||e._internalVariables.isUploading||!e._internalVariables.isDropFilesEnabled()||"Files"!=n.originalEvent.dataTransfer.types[0]&&"text/uri-list"!=n.originalEvent.dataTransfer.types[0]&&"application/x-moz-file"!=n.originalEvent.dataTransfer.types[0]||(e._internalVariables.draggedOnBtn=!0,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())}),noJquery(e.elements.uploaderDropAreaElement).on("drop",function(n){if(!e.disabled&&!e._internalVariables.isUploading&&e._internalVariables.isDropFilesEnabled()){e._internalVariables.draggedOnBtn=!1,e._internalVariables.draggedOnDocument=!1,e._internalVariables.checkDragFileStates();var a=n.originalEvent.dataTransfer.files;e._internalVariables.curUploadingFilesData=[];for(var r=0;r<a.length;r++){var t=a[r];e._internalVariables.curUploadingFilesData.push(new FileData(t))}e._internalVariables.totalFilesToUpload=Math.min(a.length,e.maxFiles),noJquery(e.elements.uploaderDropAreaElement).find("input").css("display","none"),"iframe"==e._internalVariables.getUploadType()?(noJquery(e.elements.uploaderDropAreaElement).find("input")[0].files=n.originalEvent.dataTransfer.files,e._internalVariables.onChangeTriggered||setTimeout(function(){try{var n=new Event("change");noJquery(e.elements.uploaderDropAreaElement).find("input")[0].dispatchEvent(n)}catch(e){}},1)):e._internalVariables.traverseFiles(),n.preventDefault(),n.stopPropagation()}})))},this._internalVariables.setDocumentEvents=function(){var e=this.instance;e._internalVariables.isDropFilesEnabled()&&(document.addEventListener("mousemove",function(n){e._internalVariables.curMouseX=n.clientX,e._internalVariables.curMouseY=n.clientY},!1),document.addEventListener("dragover",function(n){e.disabled||"Files"!=n.dataTransfer.types[0]&&"text/uri-list"!=n.dataTransfer.types[0]&&"application/x-moz-file"!=n.dataTransfer.types[0]||n.dataTransfer&&(n.dataTransfer.dropEffect="none",n.preventDefault())},!1),document.addEventListener("drop",function(n){e.disabled||e._internalVariables.isUploading||!e._internalVariables.isDropFilesEnabled()||"Files"!=n.dataTransfer.types[0]&&"text/uri-list"!=n.dataTransfer.types[0]&&"application/x-moz-file"!=n.dataTransfer.types[0]||(e._internalVariables.draggedOnDocument=!1,e._internalVariables.draggedOnBtn=!1,e._internalVariables.checkDragFileStates(),n.preventDefault(),n.stopPropagation())},!1),document.addEventListener("dragenter",function(n){e.disabled||e._internalVariables.isUploading||!e._internalVariables.isDropFilesEnabled()||"Files"!=n.dataTransfer.types[0]&&"text/uri-list"!=n.dataTransfer.types[0]&&"application/x-moz-file"!=n.dataTransfer.types[0]||(e._internalVariables.draggedOnDocument=!0,e._internalVariables.checkDragFileStates())},!1),noJquery("body").on("mouseleave",function(){e._internalVariables.draggedOnDocument=!1,e._internalVariables.draggedOnBtn=!1,e.disabled||e._internalVariables.isUploading||!e._internalVariables.isDropFilesEnabled()||e._internalVariables.checkDragFileStates()}),setInterval(e._internalVariables.checkMousePosition,100,e))},this._internalVariables.checkDragFileStates=function(){var e=this.instance;null!=e.elements.containerElement&&(e.disabled||e._internalVariables.isUploading||(noJquery(e.elements.containerElement).removeClass("dragged_enter"),noJquery(e.elements.containerElement).removeClass("dragged_over"),noJquery(e.elements.containerElement).removeClass("hover"),noJquery(e.elements.containerElement).removeClass("uploading"),e._internalVariables.draggedOnBtn?noJquery(e.elements.containerElement).addClass("dragged_over"):e._internalVariables.draggedOnDocument?noJquery(e.elements.containerElement).addClass("dragged_enter"):e._internalVariables.hoverOnBtn&&noJquery(e.elements.containerElement).addClass("hover"))),e._internalVariables.setText()},this._internalVariables.checkMousePosition=function(e){(Math.abs(e._internalVariables.curMouseX-e._internalVariables.lastMouseX)>5||Math.abs(e._internalVariables.curMouseY-e._internalVariables.lastMouseY)>5)&&(e._internalVariables.draggedOnDocument=!1,e._internalVariables.checkDragFileStates()),e._internalVariables.lastMouseX=e._internalVariables.curMouseX,e._internalVariables.lastMouseY=e._internalVariables.curMouseY},this._internalVariables.setText=function(){var e=this.instance;if(null!=e.elements.containerElement&&null!=e.elements.uploaderTextElement){var n="";e.disabled||e._internalVariables.isUploading?e._internalVariables.isUploading?(n=e._internalVariables.getUploadingText(),noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","")):(n=e._internalVariables.isDropFilesEnabled()?e.browseText:e.browseTextDropDisabled,noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","none")):(n=e._internalVariables.draggedOnBtn?e.dropFilesText:e._internalVariables.draggedOnDocument?e.dropFilesText:(e._internalVariables.hoverOnBtn,e._internalVariables.isDropFilesEnabled()?e.browseText:e.browseTextDropDisabled),noJquery(e.elements.uploaderTextElement).find(".uploader_spinner").css("display","none")),noJquery(e.elements.uploaderTextElement).find("span").html(n),noJquery(e.elements.uploaderInputElement).attr("aria-label",n),noJquery(e.elements.uploaderCancelButton).find("span").html(e.cancelText)}},this._internalVariables.getUploadingText=function(){var e=this.instance,n="",a=Math.min(e._internalVariables.curUploadingFilesData.length,e.maxFiles);return n=(n="chunks"==e._internalVariables.getUploadType()||"stream"==e._internalVariables.getUploadType()?null==e._internalVariables.curUploadingFilesData||e._internalVariables.curUploadingFilesData.length<=1||1==e.maxFiles?e.uploadingFileText:e.uploadingFileByFileText:1==a?e.uploadingFileText:e.uploadingFilesText).split("{{current_file_index}}").join(e._internalVariables.curUploadingFileIndex+1),n=(n=e._internalVariables.curUploadingFilesData.length>e._internalVariables.curUploadingFileIndex?n.split("{{current_file_name}}").join(e._internalVariables.getShortFilename(e._internalVariables.curUploadingFilesData[e._internalVariables.curUploadingFileIndex].name)):n.split("{{current_file_name}}").join("")).split("{{total_files}}").join(a)},this._internalVariables.getShortFilename=function(e){var n=this.instance,a=e;a=(a=(a=a.substring(a.lastIndexOf("/")+1,a.length)).substring(a.lastIndexOf("\\")+1,a.length)).substring(0,a.lastIndexOf("."));var r=e.substring(e.lastIndexOf("."),e.length);return a.length+r.length+1>n.maxFileChars&&(a=a.substring(0,n.maxFileChars-3-r.length)+"..."),a+r},this._internalVariables.replaceFileDataParams=function(e,n){return n=n.split("{{rotation}}").join(e.rotation||"").split("{{size}}").join(e.size||"").split("{{duration}}").join(e.duration||"").split("{{width}}").join(e.width||"").split("{{height}}").join(e.height||"").split("{{extension}}").join(e.extension||"")},this._internalVariables.traverseFiles=function(){var e=this.instance;void 0!==e._internalVariables.curUploadingFilesData&&e._internalVariables.curUploadingFilesData.length>0&&(e.resetFilesOnEachUpload&&(e.uploadedFiles=[]),e._internalVariables.curUploadingFileIndex=0,e._internalVariables.getFilesMetadata())},this._internalVariables.getFilesMetadata=function(){this.instance._internalVariables.getNextFileMetadata()},this._internalVariables.getNextFileMetadata=function(){var e=this.instance,n=e._internalVariables.curUploadingFilesData[e._internalVariables.curUploadingFileIndex].file,a=n.name;null==a&&(a="");var r={file:n,name:a,size:n.size,extension:a.substr(a.lastIndexOf(".")+1,5),type:n.type,width:null,height:null,rotation:null,duration:null};if(e._internalVariables.isImg(n.name)&&e.doGetFileMetadata)"undefined"!=typeof FileReader?setTimeout(function(){var t=new FileReader,i=setTimeout(function(){t.onload=null,e._internalVariables.consoleError("Failed retrieving meta data for '"+a+"'"),e._internalVariables.getFileMetaFinished(n,r)},400);t.onload=function(n){e._internalVariables.getOrientation(n.target.result,function(e){var n=0;e>0&&(5==e||6==e?n=90:3==e||4==e?n=180:7!=e&&8!=e||(n=270)),r.rotation=n})},t.onloadend=function(a){var t=new Image,l=new Uint8Array(a.target.result),s=new Blob([l.buffer]);t.src=URL.createObjectURL(s),t.onload=function(){clearTimeout(i),r.width=this.width,r.height=this.height,e._internalVariables.getFileMetaFinished(n,r)}},t.readAsArrayBuffer(n)},2):(e._internalVariables.consoleError("Can't get Exif data since browser doesn't support FileReader"),e._internalVariables.getFileMetaFinished(n,r));else if((e._internalVariables.isVideo(n.name)||e._internalVariables.isAudio(n.name))&&e.doGetFileMetadata)if("undefined"!=typeof FileReader){var t=document.createElement(e._internalVariables.isVideo(n.name)?"video":"audio");t.preload="metadata";var i=setTimeout(function(){t.onloadedmetadata=null,e._internalVariables.consoleError("Failed retrieving meta data for '"+a+"'"),e._internalVariables.getFileMetaFinished(n,r)},400);t.onloadedmetadata=function(){clearTimeout(i),window.URL.revokeObjectURL(t.src);var a=null,l=null;null!=t.width&&t.width>0&&(l=t.width),null!=t.videoWidth&&t.videoWidth>0&&(l=t.videoWidth),null!=t.height&&t.height>0&&(a=t.height),null!=t.videoHeight&&t.videoHeight>0&&(a=t.videoHeight),r.duration=t.duration,r.width=l,r.height=a,e._internalVariables.getFileMetaFinished(n,r)},t.src=URL.createObjectURL(n)}else e._internalVariables.consoleError("Can't get file meta data since browser doesn't support FileReader"),e._internalVariables.getFileMetaFinished(n,r);else e._internalVariables.getFileMetaFinished(n,r)},this._internalVariables.getFileMetaFinished=function(e,n){var a=this.instance,r=a._internalVariables.curUploadingFilesData[a._internalVariables.curUploadingFileIndex];if(r.duration=n.duration||null,r.width=n.width||null,r.height=n.height||null,r.rotation=n.rotation||null,a._internalVariables.curUploadingFilesData.length<=a._internalVariables.curUploadingFileIndex+1||a._internalVariables.curUploadingFileIndex+1>=a.maxFiles){var t=a._internalVariables.validateFiles();0==t.length?("function"==typeof a.onFilesSelected&&a.onFilesSelected(a._internalVariables.curUploadingFilesData),a._internalVariables.curUploadingFileIndex=0,a._internalVariables.onFileProgress(0),a._internalVariables.uploadFile()):a._internalVariables.parseErrors(t)}else a._internalVariables.curUploadingFileIndex++,a._internalVariables.getNextFileMetadata()},this._internalVariables.uploadFile=function(){var e=this.instance;noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src",""),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("transition","width 0s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("-webkit-transition","width 0s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("width",0),setTimeout(function(){noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("transition","width .2s"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("-webkit-transition","width .2s")},10),-1!=e.progressAnimationType.indexOf("bar")&&(noJquery(e.elements.uploaderProgressContainerElement).css("display",""),noJquery(e.elements.uploaderProgressBrElement).css("display","")),"iframe"==e._internalVariables.getUploadType()?(noJquery(e.elements.uploaderProgressBarElement).find("div").css("display","none"),noJquery(e.elements.uploaderProgressBarTextElement).css("width","auto"),noJquery(e.elements.uploaderProgressBarPaddingElement).css("display","none")):(noJquery(e.elements.uploaderProgressBarElement).find("div").css("display",""),noJquery(e.elements.uploaderProgressBarTextElement).css("width","1%"),noJquery(e.elements.uploaderProgressBarPaddingElement).css("display","")),noJquery(e.elements.uploaderResultElement).removeClass("error"),e._internalVariables.showCurrentFiles();var n=e._internalVariables.curUploadingFilesData,a=e._internalVariables.curUploadingFileIndex,r="";r=(r=(r=n.length>1&&e.maxFiles>1?e.uploadingFilesTextProgressBar:e.uploadingFileTextProgressBar).split("{{total_files}}").join(Math.min(e._internalVariables.curUploadingFilesData.length,e.maxFiles))).split("{{current_file_name}}").join(e._internalVariables.getShortFilename(n[a].name)),noJquery(e.elements.uploaderProgressBarTextElement).html(r),e._internalVariables.isUploading=!0,e._internalVariables.setCancelButtonDisplay(),e._internalVariables.setProgressDisplay(),noJquery(e.elements.containerElement).find("input").attr("onclick","return false;"),e._internalVariables.setText(),noJquery(e.elements.containerElement).removeClass("dragged_enter"),noJquery(e.elements.containerElement).removeClass("dragged_over"),noJquery(e.elements.containerElement).removeClass("hover"),noJquery(e.elements.containerElement).addClass("uploading"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").css("width",noJquery(e.elements.uploaderDropAreaElement).outerWidth()),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").css("width",noJquery(e.elements.uploaderDropAreaElement).outerWidth());var t=null;"undefined"!=typeof URL&&(t=URL.createObjectURL(n[a].file)),null!=t&&""!=t&&e._internalVariables.isImg(n[a].name)?(noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src",t).css("display",""),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src",t).css("display",""),noJquery(e.elements.uploaderDropAreaBottomLayerElement).css("opacity","0"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").unbind("load"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").on("load",function(){noJquery(this).parent().animate({opacity:1},400)}),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).css("opacity","0"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").unbind("load"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").on("load",function(){noJquery(this).parent().animate({opacity:1},400)})):(noJquery(e.elements.uploaderDropAreaBottomLayerElement).find("img").attr("src","").css("display","none"),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).find("img").attr("src","").css("display","none"),noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:1},400),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:1},400));var i="";if("chunks"==e._internalVariables.getUploadType()){var l=e._internalVariables.curUploadingFilesData[a];i=e.serverScripts.uploadChunk+"&_="+Math.random();(d=l.name).substr(d.lastIndexOf("."),5);var s=n[a].file,o=Math.floor(999999999*Math.random());e._internalVariables.uploadFileChunk(i,l,o,s,0,0,e._internalVariables.BYTES_PER_CHUNK)}else if("stream"==e._internalVariables.getUploadType()){var d=(l=e._internalVariables.curUploadingFilesData[a]).name,u=new XMLHttpRequest;e._internalVariables.uploadXhr=u,u.upload.addEventListener("progress",function(n){n.lengthComputable&&e._internalVariables.onFileProgress(n.loaded/n.total)},!1),u.addEventListener("load",function(){var r=u.responseText;try{e._internalVariables.curUploadingFileIndex++;var t=e._internalVariables.curUploadingFilesData.length<=e._internalVariables.curUploadingFileIndex||e._internalVariables.curUploadingFileIndex>=e.maxFiles;t&&e._internalVariables.curUploadingFileIndex--;var i=JSON.parse(r);function l(){e._internalVariables.parseUploadResult(i,t,n[a].file),!t&&e._internalVariables.curUploadingFilesData.length>0&&e._internalVariables.uploadFile()}null!=e.elements.uploaderDropAreaBottomLayerElement?noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:0},200,function(){l()}):l(),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:0},200)}catch(t){e._internalVariables.consoleError(t),e._internalVariables.setError("parse_failed",n[a],r),e._internalVariables.uploadXhr=null}},!1),i=(i=e.serverScripts.uploadStream).split("{{file_name}}").join(d),i=e._internalVariables.replaceFileDataParams(l,i),i+="&_="+Math.random(),u.open("post",i,!0),u.setRequestHeader("Content-Type","multipart/form-data"),u.setRequestHeader("X-File-Name",d),u.setRequestHeader("X-File-Type",l.type),u.send(n[a].file)}else{for(var p="",m="",c="",h="",f="",b="",_=0;_<e._internalVariables.curUploadingFilesData.length;_++)p+=e._internalVariables.curUploadingFilesData[_].rotation||"",m+=e._internalVariables.curUploadingFilesData[_].size||"",c+=e._internalVariables.curUploadingFilesData[_].duration||"",h+=e._internalVariables.curUploadingFilesData[_].width||"",f+=e._internalVariables.curUploadingFilesData[_].height||"",b+=e._internalVariables.curUploadingFilesData[_].extension||"",_<e._internalVariables.curUploadingFilesData.length-1&&(p+=",",m+=",",c+=",",h+=",",f+=",",b+=",");i=(i=e.serverScripts.uploadThroughIframe).split("{{rotation}}").join(p).split("{{size}}").join(m).split("{{duration}}").join(c).split("{{width}}").join(h).split("{{height}}").join(f).split("{{extension}}").join(b),e._internalVariables.onFileProgress(0),uploaerIframeGateway.uploadViaIframeGateway(e.elements.elementId,i,e._internalVariables.getIframeGatewayFullUrl(),function(n){e._internalVariables.curUploadingFileIndex=e._internalVariables.totalFilesToUpload-1,e._internalVariables.onFileProgress(1),null==e.elements.uploaderDropAreaBottomLayerElement?e._internalVariables.parseUploadResult(n,!0,null):noJquery(e.elements.uploaderDropAreaBottomLayerElement).animate({opacity:0},200,function(){e._internalVariables.parseUploadResult(n,!0,null)}),noJquery(e.elements.uploaderDropAreaMiddleLayerElement).animate({opacity:0},200,function(){})})}},this._internalVariables.setCancelButtonDisplay=function(){var e=this.instance;e.enableCancelButton&&e._internalVariables.isUploading?noJquery(e.elements.uploaderCancelButton).css("display","block"):noJquery(e.elements.uploaderCancelButton).css("display","none")},this._internalVariables.uploadFileChunk=function(e,n,a,r,t,i,l){var s,o=this.instance,d=r.size;r.slice?s=r.slice(i,l):r.mozSlice?s=r.mozSlice(i,l):r.webkitSlice&&(s=r.webkitSlice(i,l));var u=new XMLHttpRequest;o._internalVariables.uploadXhr=u,u.onload=function(){},u.onerror=function(){},u.onreadystatechange=function(s){if(4===u.readyState)if(200===u.status){var p=!1;try{var m=JSON.parse(this.response);if(Array.isArray(m)){for(var c=0;c<m.length;c++)if(null!=m[c][o.serverScripts.errorVariableName]&&""!=m[c][o.serverScripts.errorVariableName]){o._internalVariables.setError("upload_failed",n,m[c]),p=!0;break}}else"object"==typeof m?null!=m[o.serverScripts.errorVariableName]&&""!=m[o.serverScripts.errorVariableName]&&(o._internalVariables.setError("upload_failed",n,m),p=!0):(o._internalVariables.setError("parse_failed",n,null),p=!0)}catch(e){o._internalVariables.consoleError(e)}if(p)o._internalVariables.abortAndCancelUpload();else{var h=d%o._internalVariables.BYTES_PER_CHUNK==0?d/o._internalVariables.BYTES_PER_CHUNK:Math.floor(d/o._internalVariables.BYTES_PER_CHUNK)+1;null!=o._internalVariables.onFileProgress&&"function"==typeof o._internalVariables.onFileProgress&&o._internalVariables.onFileProgress(t/h),t==h?(o._internalVariables.uploadXhr=null,o._internalVariables.uploadFileInChunksComplete(n,a)):(l=(i=l)+o._internalVariables.BYTES_PER_CHUNK,t++,o._internalVariables.isUploading&&o._internalVariables.uploadFileChunk(e,n,a,r,t,i,l))}}else if(0===u.status);else{var f=[];f.push({error:"upload_failed",file:n}),o._internalVariables.parseErrors(f)}};var p=e.split("{{file_name}}").join(n.name).split("{{chunk_index}}").join(t).split("{{request_id}}").join(a);u.open("POST",p),u.send(s)},this._internalVariables.uploadFileInChunksComplete=function(e,n){var a=this.instance,r=a.serverScripts.combineChunks.split("{{file_name}}").join(e.name).split("{{request_id}}").join(n);r=a._internalVariables.replaceFileDataParams(e,r),a._internalVariables.uploadXhr=noJquery.ajax({url:r,dataType:"jsonp",success:function(n){a._internalVariables.curUploadingFileIndex++;var r=a._internalVariables.curUploadingFilesData.length<=a._internalVariables.curUploadingFileIndex||a._internalVariables.curUploadingFileIndex>=a.maxFiles;a._internalVariables.parseUploadResult(n,r,e),!r&&a._internalVariables.curUploadingFilesData.length>0&&a._internalVariables.uploadFile(),a._internalVariables.uploadXhr=null},error:function(n,r){"abort"===r||a._internalVariables.setError("upload_failed",e),a._internalVariables.uploadXhr=null}})},this._internalVariables.onFileProgress=function(e){var n=this.instance,a=Math.min(n._internalVariables.curUploadingFilesData.length,n.maxFiles);if("function"==typeof n.onFilesProgress&&n.onFilesProgress(e,n._internalVariables.curUploadingFileIndex,n._internalVariables.totalFilesToUpload),-1!=n.progressAnimationType.indexOf("bar")){var r=100/a,t=r*n._internalVariables.curUploadingFileIndex+r*e;noJquery(n.elements.uploaderProgressBarColorElement).css("width",t+"%")}if(-1!=n.progressAnimationType.indexOf("inline")){var i=100,l=n._internalVariables.getIEVersion();l>=9&&l<=10&&(i=99),noJquery(n.elements.uploaderDropAreaBottomLayerElement).css("width",Math.ceil(e*i)+"%"),noJquery(n.elements.uploaderDropAreaMiddleLayerElement).css("width",noJquery(n.elements.uploaderDropAreaElement).outerWidth())}noJquery(n.elements.containerElement).attr("data-file-progress",Math.ceil(100*e))},this.cancelUpload=function(){this._internalVariables.abortAndCancelUpload(),"function"==typeof this.onCanceled&&this.onCanceled()},this._internalVariables.abortAndCancelUpload=function(){var e=this.instance;e._internalVariables.curUploadingFilesData=[],null!=e._internalVariables.uploadXhr&&(e._internalVariables.uploadXhr.abort(),e._internalVariables.uploadXhr=null),e._internalVariables.isUploading=!1,e._internalVariables.showUploadBtn(),"iframe"==e._internalVariables.getUploadType()&&uploaerIframeGateway.cancelUpload(e.elements.elementId,e._internalVariables.getIframeGatewayFullUrl())},this._internalVariables.parseUploadResult=function(e,n,a){var r=this.instance,t=!1;if(Array.isArray(e))for(var i=0;i<e.length;i++){if(null==e[i][r.serverScripts.fileNameVariableName]||""==e[i][r.serverScripts.fileNameVariableName]){null!=e[i][r.serverScripts.errorVariableName]&&""!=e[i][r.serverScripts.errorVariableName]||r._internalVariables.consoleError("Parameter '"+r.serverScripts.fileNameVariableName+"' not found on returned JSON object"),r._internalVariables.setError("upload_failed",a,e[i]),t=!0;break}e[i].file_name=e[i][r.serverScripts.fileNameVariableName],e[i].file_path=e[i][r.serverScripts.fileUrlVariableName],e[i].error=e[i][r.serverScripts.errorVariableName],r.uploadedFiles.push(e[i])}else"object"==typeof e?null==e[r.serverScripts.fileNameVariableName]||""==e[r.serverScripts.fileNameVariableName]?(null!=e[r.serverScripts.errorVariableName]&&""!=e[r.serverScripts.errorVariableName]||r._internalVariables.consoleError("Parameter '"+r.serverScripts.fileNameVariableName+"' not found on returned JSON object"),r._internalVariables.setError("upload_failed",a,e),t=!0):(e.file_name=e[r.serverScripts.fileNameVariableName],e.file_path=e[r.serverScripts.fileUrlVariableName],e.error=e[r.serverScripts.errorVariableName],r.uploadedFiles.push(e)):(r._internalVariables.setError("parse_failed",a,null),t=!0);n&&!t&&(r._internalVariables.isUploading=!1,"function"==typeof r.onFilesUploaded&&r.onFilesUploaded(r.uploadedFiles),r._internalVariables.showCurrentFiles(),r._internalVariables.showUploadBtn())},this._internalVariables.showCurrentFiles=function(){var e=this.instance;if(null!=e.elements.uploaderResultElement){clearTimeout(e._internalVariables.displayErrorAnimationTimeoutDuration);var n="<a class='uploader_delete_btn' data-index='{{index}}' href='javascript: void(0);'><div></div></a>&nbsp;";if(e.enableDeleteButton||(n=""),null==e.uploadedFiles||0==e.uploadedFiles.length)noJquery(e.elements.uploaderResultElement).html("");else{for(var a="",r=0;r<e.uploadedFiles.length;r++){var t=e.uploadedFiles[r];if(null!=t.file_name&&""!=t.file_name){var i="";"function"==typeof e.uploadedFileTemplate?i=e.uploadedFileTemplate(t):(void 0===(i=e.uploadedFileHtml)&&(i=""),i=i.split("{{current_file_path}}").join(t.file_path).split("{{current_file_name}}").join(e._internalVariables.getShortFilename(t.file_name))),a+="<div class='uploader_result_file'>"+n.split("{{index}}").join(r)+i+"</div>"}}noJquery(e.elements.uploaderResultElement).html(a)}var l=e.elements.containerElement.querySelectorAll(".uploader_delete_btn");for(r=0;r<l.length;r++)noJquery(l.item(r)).on("click",function(){e.disabled||e._internalVariables.deleteFile(noJquery(this).attr("data-index"))});noJquery(e.elements.uploaderResultElement).fadeIn()}},this._internalVariables.deleteFile=function(e){var n=this.instance,a=(parseInt(e),n.uploadedFiles.splice(e,1));"function"==typeof n.onFileDeleted&&n.onFileDeleted(a[0],n.uploadedFiles),n._internalVariables.showCurrentFiles()},this._internalVariables.setError=function(e,n,a){var r=this.instance,t=[];t.push({error:e,file:n,error_object:a}),r._internalVariables.parseErrors(t)},this._internalVariables.parseErrors=function(e){for(var n=this.instance,a="",r=0;r<e.length;r++){var t,i=e[r];if(null!=(t="invalid_file_extension"==i.error||null!=i.error_object&&"invalid_file_extension"==i.error_object.error?n.errors.invalidFileExtension:"invalid_file_size"==i.error||null!=i.error_object&&"invalid_file_size"==i.error_object.error?n.errors.invalidFileSize:"parse_failed"==i.error||null!=i.error_object&&"parse_failed"==i.error_object.error?n.errors.parseFailed:"upload_failed"==i.error?n.showDetailedErrorFromServer&&null!=i.error_object&&null!=i.error_object.error&&""!=i.error_object.error?i.error_object.error:n.errors.uploadFailed:null!=i.error_text?i.error_text:n.errors.unspecifiedError)){var l=i.file;null!=l&&(t=t.split("{{file_name}}").join(n._internalVariables.getShortFilename(l.name))),i.error_text=t,""!=a&&(a+="<br>"),a+=t}}noJquery(n.elements.uploaderResultElement).addClass("error"),noJquery(n.elements.uploaderResultElement).html(a).css("opacity","0").fadeIn(),n._internalVariables.abortAndCancelUpload(),"function"==typeof n.onError&&n.onError(e),n._internalVariables.hoverOnBtn=!1,n._internalVariables.checkDragFileStates(),clearTimeout(n._internalVariables.displayErrorAnimationTimeoutDuration),n._internalVariables.displayErrorAnimationTimeoutDuration=setTimeout(function(){noJquery(n.elements.uploaderResultElement).fadeOut(function(){n._internalVariables.showCurrentFiles()})},n.displayErrorDuration)},this._internalVariables.consoleError=function(e){var n=!!window.MSInputMethodContext&&!!document.documentMode,a=-1!=navigator.userAgent.indexOf("MSIE"),r="";null!=arguments&&null!=arguments.callee&&null!=arguments.callee.caller&&(r=arguments.callee.caller.toString()),null!=r&&""!=r||null!=this._internalVariables.consoleError.caller&&(r=this._internalVariables.consoleError.caller.toString()),"undefined"!=typeof console&&(n||a?console.warn("Uploader: "+e):console.log("%c Uploader: "+e,"background: #222; color: #bada55; padding: 10px;"))},this._internalVariables.getUploadType=function(){var e=this.instance;if(!e._internalVariables.canUploadFileInchunks()){var n=e._internalVariables.getIEVersion();return e._internalVariables.isCrossDomainScript(e.serverScripts.uploadStream)||n>=0&&n<=9?"iframe":"stream"}return e._internalVariables.isCrossDomainScript(e.serverScripts.uploadStream)?"chunks":navigator.userAgent.indexOf("Edge")>-1?"chunks":"stream"},this._internalVariables.canUploadFileInchunks=function(){var e=this.instance;if(!e.uploadFileInChunks)return!1;if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&e._internalVariables.isCrossDomainScript(e.serverScripts.uploadChunk))return!1;var n=e._internalVariables.getIEVersion();return!(n>=0&&n<=9)},this._internalVariables.isCrossDomainScript=function(e){this.instance;var n=!1;if(0==e.indexOf("http:")||0==e.indexOf("https:")||0==e.indexOf("//")){(e.indexOf("://")>-1?e.split("/")[2]:0==e.indexOf("//")?(e=e.substring(2)).split("/")[0]:e.split("/")[0]).split(":")[0].toLowerCase()!=window.location.host.toLowerCase()&&(n=!0)}return n},this._internalVariables.getIEVersion=function(){var e=-1;return-1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),navigator.userAgent.match(/Trident.*rv\:11\./)&&(e=11),e},this._internalVariables.isMobileOrTablet=function(){var e,n=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n},this._internalVariables.videoFileTypes=[".3gp2",".3gpp",".3gpp2",".asf",".asx",".avi",".flv",".m4v",".mkv",".mov",".mpeg",".mpg",".mpe",".m1s",".mpa",".mp2",".m2a",".mp2v",".m2v",".m2s",".mp4",".ogg",".rm",".wmv",".mp4",".qt",".ogm",".vob",".webm",".787",".ogv"],this._internalVariables.audioFileTypes=[".3gp",".act",".aiff",".aac",".alac",".amr",".atrac",".au",".awb",".dct",".dss",".dvf",".flac",".gsm",".iklax",".ivs",".m4a",".m4p",".mmf",".mp3",".mpc",".msv",".ogg",".opus",".raw",".tta",".vox",".wav",".wma"],this._internalVariables.imageFileTypes=[".jpg",".jpeg",".png",".tiff",".bmp",".gif"],this._internalVariables.isFileType=function(e,n){var a=e.substr(e.lastIndexOf("."),5);return a=a.toLowerCase(),-1!=noJquery.inArray(a.toLowerCase(),n)},this._internalVariables.isImg=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.imageFileTypes)},this._internalVariables.isVideo=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.videoFileTypes)},this._internalVariables.isAudio=function(e){var n=this.instance;return n._internalVariables.isFileType(e,n._internalVariables.audioFileTypes)},this._internalVariables.isDropFilesEnabled=function(){var e=this.instance,n=navigator.userAgent;if(!e.enableDropFiles)return!1;if(-1!=n.indexOf("MSIE")&&-1==n.indexOf("MSIE 10.0"))return!1;var a=e._internalVariables.getIEVersion();return(!(/Edge/.test(navigator.userAgent)||a>=0)||"iframe"!=e._internalVariables.getUploadType())&&!e._internalVariables.isMobileOrTablet()},this._internalVariables.getIframeGatewayFullUrl=function(){var e=this.instance;return 0==e.iframeGateway.indexOf("//")||0==e.iframeGateway.indexOf("http://")||0==e.iframeGateway.indexOf("https://")?e.iframeGateway:window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/"+e.iframeGateway},this._internalVariables.validateIframeGatewayPath=function(){var e=this.instance,n=e._internalVariables.getIframeGatewayFullUrl();e._internalVariables.isCrossDomainScript(n)?e._internalVariables.consoleError("Iframe gateway must be at same domain as current page, not at "+n):noJquery.ajax({type:"HEAD",url:n,success:function(e){},error:function(a,r){e._internalVariables.consoleError("Iframe gateway can't be found at "+n)}})},this._internalVariables.getOrientation=function(e,n){if(view=new DataView(e),65496!=view.getUint16(0,!1))return n(-2);for(var a=view.byteLength,r=2;r<a;){if(view.getUint16(r+2,!1)<=8)return n(-1);var t=view.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!=view.getUint32(r+=2,!1))return n(-1);var i=18761==view.getUint16(r+=6,!1);r+=view.getUint32(r+4,i);var l=view.getUint16(r,i);r+=2;for(var s=0;s<l;s++)if(274==view.getUint16(r+12*s,i))return n(view.getUint16(r+12*s+8,i))}else{if(65280!=(65280&t))break;r+=view.getUint16(r,!1)}}return n(-1)},this._internalVariables.build()}var uploaerIframeGateway={objs:[],uploaderIframeActionCompleted:function(e,n){var a=this.objs[e];a.uploaderIframeActionCompletedCalled||(a.uploaderIframeActionCompletedCalled=!0,null!=a.actionCompletedFunc&&a.actionCompletedFunc(n),noJquery("iframe[data-request='"+e+"']").remove())},uploadViaIframeGateway:function(e,n,a,r){var t=Math.floor(999999999*Math.random()),i=new Object;i.closed=!1,i.actionCompletedFunc=r,uploaerIframeGateway.objs[t]=i;var l=e+"_gateway_iframe";null==noJquery("#"+l).get(0)&&noJquery("<iframe id='"+l+"' data-request='"+t+"' name='"+l+"' style='width: 1px; height: 1px; opacity: 0; display: none;'>").appendTo("body");var s=n;-1!=s.indexOf("?")?s+="&":s+="?",s=s.split("{{request_id}}").join(t).split("{{iframe_gateway}}").join(a),0==(s+="_="+Math.random()).indexOf("//")&&(s=window.location.protocol+s),noJquery("#"+e+"_form").html(""),noJquery("#"+e+"_input").appendTo("#"+e+"_form"),noJquery("#"+e+"_form").attr("action",s).attr("target",l).attr("enctype","multipart/form-data").attr("method","post").get(0).submit()},cancelUpload:function(e,n){var a=e+"_gateway_iframe",r=n;null==noJquery("#"+a).get(0)&&noJquery("<iframe id='"+a+"' name='"+a+"' style='width: 1px; height: 1px; opacity: 0; display: none;'>").appendTo("body");noJquery("#"+e+"_form").attr("action",r).attr("target",a).attr("enctype","multipart/form-data").attr("method","get").get(0).submit()}};function noJquery(e){if(!(this instanceof noJquery))return new noJquery(e);if("function"==typeof e)return e.call(document);if(this.length=0,this.nodes=[],"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)this.nodes=e.length>1?[].slice.call(e):[e];else if("string"==typeof e)if(0==e.indexOf("<")){var n=document.createElement("div");n.innerHTML=e,this.nodes=[n.firstChild]}else{this.nodes=[];for(var a=document.querySelectorAll(e),r=0;r<a.length;r++)this.nodes.push(a.item(r))}if(this.nodes.length){this.length=this.nodes.length;for(r=0;r<this.nodes.length;r++)this[r]=this.nodes[r]}}noJquery.fn=noJquery.prototype,noJquery.fn.each=function(e){for(var n=0;n<this.length;n++)e.call(this[n],this,n);return this},noJquery.fn.hasClass=function(e){for(var n=!1,a=0;a<this.nodes.length;a++)this.nodes[a].classList?this.nodes[a].classList.contains(e)&&(n=!0):new RegExp("(^| )"+e+"( |$)","gi").test(this.nodes[a].className)&&(n=!0);return n},noJquery.fn.addClass=function(e){if(!this.hasClass(e))for(var n=0;n<this.nodes.length;n++)this.nodes[n].className=this.nodes[n].className.trim()+" "+e;return this},noJquery.fn.removeClass=function(e){return this.each(function(){this.className=this.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}),this},noJquery.fn.text=function(e){return void 0===e&&(e=""),this.each(function(){this.innerText=e})},noJquery.fn.html=function(e){if(null==e||void 0===e)return null!=this.nodes&&this.nodes.length>0?this.nodes[0].innerHTML:null;for(var n=0;n<this.nodes.length;n++)this.nodes[n].innerHTML=e;return this},noJquery.fn.css=function(e,n){if(void 0!==e)for(var a=0;a<this.nodes.length;a++)if("width"!=e&&"height"!=e&&"left"!=e&&"top"!=e||isNaN(n)||null==n||""==n||(n+="px"),-1!=e.indexOf("-")){var r=e.split("-");r.length>1&&(r[1]=r[1].charAt(0).toUpperCase()+r[1].slice(1)),this.nodes[a].style[r.join("")]=n}else this.nodes[a].style[e]=n;return this},noJquery.events=[],noJquery.fn.on=function(e,n){for(var a=(e=e.split(" ").join("")).split(","),r=0;r<a.length;r++)this.each(function(){var t={elem:this,name:e,handler:function(e){e.originalEvent=e,null==e.pageX&&null!=e.clientX&&(-1!=navigator.appVersion.indexOf("MSIE")&&8==parseFloat(navigator.appVersion.split("MSIE")[1])?(e.pageX=e.clientX,e.pageY=e.clientY):(eventDoc=e.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,e.pageX=e.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),e.pageY=e.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0))),n.call(this,e)}};this.addEventListener(a[r],t.handler,!1),noJquery.events.push(t)});return this},noJquery.fn.unbind=function(e){for(var n=(e=e.split(" ").join("")).split(","),a=0;a<n.length;a++)this.each(function(){for(var r=0;r<noJquery.events.length;r++)noJquery.events[r].elem==this&&noJquery.events[r].name==e&&this.removeEventListener(n[a],noJquery.events[r].handler,!1)});return this},noJquery.fn.appendTo=function(e){return null!=this.nodes&&this.nodes.length>0&&document.querySelector(e).appendChild(this.nodes[0]),this},noJquery.fn.append=function(e){for(var n=0;n<this.nodes.length;n++)this.nodes[n].appendChild(e);return this},noJquery.fn.find=function(e){return null!=this.nodes&&this.nodes.length>0?new noJquery(this.nodes[0].querySelector(e)):this},noJquery.fn.attr=function(e,n){if(void 0===n)return null!=this.nodes&&this.nodes.length>0?this.nodes[0].getAttribute(e):null;for(var a=0;a<this.nodes.length;a++)this.nodes[a].setAttribute(e,n);return this},noJquery.fn.removeAttr=function(e){for(var n=0;n<this.nodes.length;n++)this.nodes[n].removeAttribute(e);return this},noJquery.fn.get=function(e){return null==this.nodes||0==this.nodes.length?null:this.nodes[e]},noJquery.fn.remove=function(){return null!=this.nodes&&this.nodes.length>0&&this.nodes[0].parentNode.removeChild(this.nodes[0]),this},noJquery.fn.parent=function(){return null!=this.nodes&&this.nodes.length>0&&(this.nodes=[this.nodes[0].parentNode]),this},noJquery.fn.outerWidth=function(){return null!=this.nodes&&this.nodes.length>0?this.nodes[0].offsetWidth:null},noJquery.fn.outerHeight=function(){return null!=this.nodes&&this.nodes.length>0?this.nodes[0].outerHeight:null},noJquery.fn.offset=function(){if(null!=this.nodes&&this.nodes.length>0){var e=this.nodes[0].getBoundingClientRect(),n=window.pageYOffset||document.body.scrollTop,a=window.pageXOffset||document.body.scrollLeft;return{top:e.top+n,left:e.left+a}}return null},noJquery.animations=[],noJquery.getAnimationByElementAndType=function(e,n){for(var a=0;a<noJquery.animations.length;a++)if(noJquery.animations[a].element==e&&noJquery.animations[a].animationType==n)return noJquery.animations[a];return curAnimation={element:e,animationType:n,animationFrame:null,timeout:null},noJquery.animations.push(curAnimation),curAnimation},noJquery.fn.fadeIn=function(e){this.animate({opacity:1},400,e)},noJquery.fn.fadeOut=function(e){this.animate({opacity:0},400,e)},noJquery.fn.animate=function(e,n,a){for(var r=0;r<this.nodes.length;r++){var t=this.nodes[r],i=0,l=0;for(var s in e){"opacity"==s&&void 0!==window.getComputedStyle&&(i=parseInt(window.getComputedStyle(t).getPropertyValue("opacity")),l=i<e[s]?1:-1);var o=noJquery.getAnimationByElementAndType(t,s);null!=o&&(null!=o.animationFrame&&window.cancelAnimationFrame(o.animationFrame),null!=o.timeout&&(clearTimeout(o.timeout),o.timeout=null))}var d=new Date;d.setMilliseconds(d.getMilliseconds()+n);var u=function(){for(var r in e){var s=noJquery.getAnimationByElementAndType(t,r);if("opacity"==r){var o=i+(e[r]-i)*(1-(d-new Date)/n);t.style.opacity=o,t.style.filter="alpha(opacity="+100*o|"0)",l>0&&o<e[r]||l<=0&&o>e[r]?window.requestAnimationFrame?s.animationFrame=requestAnimationFrame(u):s.timeout=setTimeout(u,16):(t.style.opacity=e[r],t.style.filter="alpha(opacity="+100*e[r]|"0)","function"==typeof a&&a())}}};u()}},noJquery.inArray=function(e,n){for(var a=0;a<n.length;a++)if(n[a]===e)return a;return-1},noJquery.extend=function(e){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var a in arguments[n])arguments[n].hasOwnProperty(a)&&(e[a]=arguments[n][a]);return e},noJquery.ajax=function(e){if("jsonp"==e.dataType)return noJquery.jsonp(e);if("HEAD"==e.type){var n={},a=new XMLHttpRequest;return a.open(e.type,e.url),a.onreadystatechange=function(n){4===a.readyState&&(200===a.status?"function"==typeof e.success&&e.success(this.response):0===a.status?"function"==typeof e.error&&e.error(a,"abort"):"function"==typeof e.error&&e.error(a,"error"))},a.send(),n.xhr=n,n}return null},noJquery.jsonp=function(e){var n={},a="jsonp_callback_"+Math.round(1e5*Math.random()),r=document.createElement("script");return r.src=e.url+(e.url.indexOf("?")>=0?"&":"?")+"callback="+a,window[a]=function(n){window[a]=function(){},document.body.removeChild(r),r=null,e.success,e.success(n)},e.error,r.addEventListener("error",e.error),document.body.appendChild(r),n.abort=function(){window[a]=function(){};try{document.body.removeChild(r)}catch(e){}r=null,e.error,e.error(null,"abort")},n},window.noJquery=noJquery,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||(Object.defineProperty=function(e,n,a){if("get"in a&&"function"==typeof a.get)return a.get();"set"in a&&"function"==typeof a.set&&a.set()}),!window.addEventListener&&function(e,n,a,r,t,i,l){e[r]=n[r]=a[r]=function(e,n){var a=this;l.unshift([a,e,n,function(e){e.currentTarget=a,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||a,n.call(a,e)}]),this.attachEvent("on"+e,l[0][3])},e[t]=n[t]=a[t]=function(e,n){for(var a,r=0;a=l[r];++r)if(a[0]==this&&a[1]==e&&a[2]==n)return this.detachEvent("on"+e,l.splice(r,1)[0][3])},e[i]=n[i]=a[i]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);